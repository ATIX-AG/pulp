<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="../css/pulp-ug.css" />
  <link rel="shortcut icon" href="../favicon.ico" />
  <title>Pulp User Guide</title>
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20330081-1']);
      _gaq.push(['_trackPageview']);

  (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script> 
</head>
<body>

<div id="header">
<a href="/">
<div id="logo">
<h1 class="invisible">Pulp</h1>
</div>
</a>
</div>
<!-- END HEADER -->


<div id="content" class="wiki">

 
  
  
   
   <div class="wikipage">
    <div id="searchable"><h1 id="Repositories">Repositories</h1>
<p>
In Pulp, a repository (or <i>repo</i> for short) is a collection of packages, errata, and distributions. The packages can be synchronized into Pulp from an external <i>feed</i> (yum, RHN, etc.) or manually uploaded and maintained by a Pulp admin. For feed-based repositories, the repo can be configured to keep itself updated from the source at scheduled intervals.
</p>
<p>
Through Pulp, clients (or <i>consumers</i> in Pulp terminology) are <i>bound</i> to a repository, enabling them to retrieve that repository's content. This binding is covered in the <a class="wiki" href="UGConsumers.html#bind">Consumer Bind</a> section of the user guide.
</p>
<p>
The <tt>pulp-admin</tt> script provides ways to manipulate repositories in Pulp. The following sections describe the repository-related features that are provided.
</p>
<hr />
<h2 id="crud">Creation, Update, Removal, Display</h2>
<h3 id="Creation">Creation</h3>
<p>
The first step when working with repositories is to create one. Repository creation is done through the <tt>repo create</tt> command in the <tt>pulp-admin</tt> script. For example, to create a repository that will synchronize packages from the Pulp Fedora 14 x86_64 repository, the following command would be used:
</p>
<pre class="wiki">$ pulp-admin repo create --id example --feed http://repos.fedorapeople.org/repos/pulp/pulp/fedora-14/x86_64
Successfully created repository [ example ]
</pre><p>
The following attributes can be specified at repo creation time (all attributes are optional unless otherwise specified).
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Required. Uniquely identifies the repository within the Pulp server. This ID is used when calling operations on a repo. 
</td></tr><tr><td> Name </td><td> <tt>--name</tt> </td><td> Display name used to better describe the content and purpose of the repo. 
</td></tr><tr><td> Architecture </td><td> <tt>--arch</tt> </td><td> Indicates the architecture of packages that will be found in the repo. 
</td></tr><tr><td> Feed </td><td> <tt>--feed</tt> </td><td> Indicates where packages should be synchronized from when populating the repo. See the section below on feeds for more information. 
</td></tr><tr><td> Schedule Interval </td><td> <tt>--interval</tt> </td><td> Time between scheduled syncs in <a class="wiki" href="https://fedorahosted.org/pulp/wiki/RepoSyncScheduling">iso8601</a> format 
</td></tr><tr><td> Schedule Start </td><td> <tt>--start</tt> </td><td> Date and time of first scheduled sync in <a class="wiki" href="https://fedorahosted.org/pulp/wiki/RepoSyncScheduling">iso8601</a> format (optional: not specified means to run immediately) 
</td></tr><tr><td> Schedule Runs </td><td> <tt>--runs</tt> </td><td> Total scheduled syncs (optional: not specified means run indefinitely) 
</td></tr><tr><td> Feed CA Certificate </td><td> <tt>--feed_ca</tt> </td><td> If the feed uses an HTTPS connection, this indicates the CA certificate used to verify the server's SSL certificate. The certificate will be uploaded to the Pulp server and used when synchronizing the repository. 
</td></tr><tr><td> Feed Entitlement Certificate </td><td> <tt>--feed_cert</tt> </td><td> If the feed uses an HTTPS connection and requires an entitlement certificate for authentication, this indicates the certificate to use. The certificate will be uploaded to the Pulp server and used when synchronizing the repository. 
</td></tr><tr><td> Feed Entitlement Private Key </td><td> <tt>--feed_key</tt> </td><td> When using an entitlement certificate, this indicates the certificate's associated private key. 
</td></tr><tr><td> Consumer CA Certificate </td><td> <tt>--consumer_ca</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Consumer Entitlement Certificate </td><td> <tt>--consumer_cert</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Consumer Entitlement Private Key </td><td> <tt>--consumer_key</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Symlinks Flag </td><td> <tt>--symlinks</tt> </td><td> If specified, the repository contents will be symlinked from their original location instead of copied (only applicable for local feeds). 
</td></tr><tr><td> Relative Path </td><td> <tt>--relativepath</tt> </td><td> Relative path at which the repository will be served. If this is not specified, the repo will default to being served at the same path as found in the feed. 
</td></tr><tr><td> Group ID </td><td> <tt>--groupid</tt> </td><td> Tags the repository as part of a repo group. The group does not need to be explicitly created ahead of time; simply putting a repository in a group using this attribute is the only step necessary. 
</td></tr><tr><td> GPG Keys </td><td> <tt>--gpgkeys</tt> </td><td> A comma-separated list of GPG public key files that can be used to verify the packages found within the repository. 
</td></tr></table>
<h4 id="Feeds">Feeds</h4>
<p>
The feed URL is just a valid url string. Supported protocols include 'http','https', 'ftp' or 'file' when creating the repository. For example:
</p>
<pre class="wiki">$ pulp-admin repo create --id example --feed=https://example.com/repos
$ pulp-admin repo create --id example --feed=file:///mount/data/f14/repos
</pre><h3 id="Update">Update</h3>
<p>
A repository may be updated after it has been created through the <tt>repo update</tt> command in the <tt>pulp-admin</tt> script. For example, to update a repository so it will synchronize packages from the Pulp Fedora 14 i386 repository instead of the x86_84 repository, the following command would be used:
</p>
<pre class="wiki">$ pulp-admin repo update --id example --feed http://repos.fedorapeople.org/repos/pulp/pulp/fedora-14/i386 --arch i386
Successfully updated repository [ example ]
</pre><p>
The following attributes can be updated (all attributes are optional unless otherwise specified).
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Required. Identifies the repository to be updated. 
</td></tr><tr><td> Name </td><td> <tt>--name</tt> </td><td> Change the display name which is used to better describe the content and purpose of the repo. 
</td></tr><tr><td> Architecture </td><td> <tt>--arch</tt> </td><td> Change the architecture of packages that will be found in the repo. 
</td></tr><tr><td> Feed </td><td> <tt>--feed</tt> </td><td> Change where packages should be synchronized from when populating the repo. 
</td></tr><tr><td> Schedule Interval </td><td> <tt>--interval</tt> </td><td> Time between scheduled syncs in <a class="wiki" href="https://fedorahosted.org/pulp/wiki/RepoSyncScheduling">iso8601</a> format 
</td></tr><tr><td> Schedule Start </td><td> <tt>--start</tt> </td><td> Date and time of first scheduled sync in <a class="wiki" href="https://fedorahosted.org/pulp/wiki/RepoSyncScheduling">iso8601</a> format (optional: not specified means to run immediately) 
</td></tr><tr><td> Schedule Runs </td><td> <tt>--runs</tt> </td><td> Total scheduled syncs (optional: not specified means run indefinitely) 
</td></tr><tr><td> Delete Schedule </td><td> <tt>--delete-schedule</tt> </td><td> Delete an existing schedule 
</td></tr><tr><td> Feed CA Certificate </td><td> <tt>--feed_ca</tt> </td><td> If the feed uses an HTTPS connection, this indicates the CA certificate used to verify the server's SSL certificate. The certificate will be uploaded to the Pulp server and used when synchronizing the repository. 
</td></tr><tr><td> Feed Entitlement Certificate </td><td> <tt>--feed_cert</tt> </td><td> If the feed uses an HTTPS connection and requires an entitlement certificate for authentication, this indicates the certificate to use. The certificate will be uploaded to the Pulp server and used when synchronizing the repository. 
</td></tr><tr><td> Feed Entitlement Private Key </td><td> <tt>--feed_key</tt> </td><td> When using an entitlement certificate, this indicates the certificate's associated private key. 
</td></tr><tr><td> Remove Feed Entitlement Certificate </td><td> <tt>--remove_feed_cert</tt> </td><td> Removes any feed HTTPS data, including the CA certificate, entitlement certificate and its private key. This cannot be specified at the same time as any of the <tt>--feed_*</tt> attributes. 
</td></tr><tr><td> Consumer CA Certificate </td><td> <tt>--consumer_ca</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Consumer Entitlement Certificate </td><td> <tt>--consumer_cert</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Consumer Entitlement Private Key </td><td> <tt>--consumer_key</tt> </td><td> See <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a> 
</td></tr><tr><td> Remove Consumer Entitlement Certificate </td><td> <tt>--remove_consumer_cert</tt> </td><td> Disabled repository authentication from the repository. For more information, see <a class="wiki" href="UGRepoAuth.html">Repository Authentication</a>. 
</td></tr><tr><td> Symlinks Flag </td><td> <tt>--symlinks</tt> </td><td> Change whether the repository contents will be symlinked from their original location instead of copied (only applicable for local feeds). 
</td></tr><tr><td> Relative Path </td><td> <tt>--relativepath</tt> </td><td> Change the relative path at which the repository will be served. If this is not specified, the repo will default to being served at the same path as found in the feed. 
</td></tr><tr><td> Group ID </td><td> <tt>--groupid</tt> </td><td> Tags the repository as part of a repo group. The group does not need to be explicitly created ahead of time; simply putting a repository in a group using this attribute is the only step necessary. 
</td></tr><tr><td> Add GPG keys </td><td> <tt>--addkeys</tt> </td><td> A comma-separated list of GPG public key files to be added. 
</td></tr><tr><td> Remove GPG keys </td><td> <tt>--rmkeys</tt> </td><td> A comma-separated list of GPG public key files to be removed. 
</td></tr></table>
<h3 id="Removal">Removal</h3>
<p>
Removing a repository from Pulp is as simple as running the <tt>repo delete</tt> command.
</p>
<pre class="wiki">$ pulp-admin repo delete --id example
</pre><h3 id="Display">Display</h3>
<p>
There are a number of different views into a repository's contents.
</p>
<h4 id="RepositoryList">Repository List</h4>
<p>
The list of all repositories in the Pulp server can be retrieved with the <tt>repo list</tt> command.
</p>
<pre class="wiki">$ pulp-admin repo list
+------------------------------------------+
       List of Available Repositories
+------------------------------------------+

Id              	example                  
Name               	example                  
FeedURL            	http://example.com/repos 
FeedType           	yum                      
Arch               	noarch                   
Sync Schedule      	None                     
Packages           	0                        
Files              	0                        
Distributions      	None                     
Publish            	True                     
Clones             	[]                       
Groups             	None
</pre><p>
The following fields are displayed for each repository:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> Unique identifier for the repository; used throughout the Pulp interfaces when referring to the repo. 
</td></tr><tr><td> Name </td><td> User-friendly, descriptive name of the repository. 
</td></tr><tr><td> Feed URL </td><td> URL of the feed from which this the contents of this repository will be synchronized. 
</td></tr><tr><td> Feed Type </td><td> Identifies the synchronization scheme used when downloading content from the feed. 
</td></tr><tr><td> Architecture </td><td> Describes the architecture of packages found within the repository. 
</td></tr><tr><td> Synchronization Schedule </td><td> Cron syntax describing when (if at all) the repository will automatically be synchronized. 
</td></tr><tr><td> Packages </td><td> Number of packages in the repository. 
</td></tr><tr><td> Files </td><td> Number of non-package files in the repository. 
</td></tr><tr><td> Distributions </td><td> Displays the name of all distributions that are present in the repository. 
</td></tr><tr><td> Publish </td><td> Indicates if the repository is being served by Pulp. If this is "False", the repository content exists in the Pulp server but is not accessible to consumers. 
</td></tr><tr><td> Clones </td><td> List of repository IDs of repos cloned from the repo being displayed. 
</td></tr><tr><td> Groups </td><td> A list of groups to which the repository belongs. 
</td></tr></table>
<h4 id="Status">Status</h4>
<p>
Synchronization status information can be found for an individual repository through the <tt>repo status</tt> command. Since this command is only retrieving information on a specific repository, the <tt>--id</tt> flag is required.
</p>
<pre class="wiki">$ pulp-admin repo status --id example
+------------------------------------------+
             Status for example
+------------------------------------------+
Repository: example
Number of Packages: 0
Last Sync: never
</pre><h4 id="Contents">Contents</h4>
<p>
The list of items in a repository can be displayed with the <tt>repo content</tt> command. Again, the <tt>--id</tt> flag is required to indicate the repository being queried.
</p>
<pre class="wiki">$ pulp-admin repo content --id pulp-f14-64
+------------------------------------------+
           Contents of pulp-f14-64
+------------------------------------------+

Packages in pulp-f14-64: 

python-pymongo-1.6-5.fc14.x86_64.rpm
pulp-client-0.0.117-1.fc14.noarch.rpm
grinder-0.0.67-1.fc14.noarch.rpm
gofer-lib-0.10-1.fc14.noarch.rpm
pulp-common-0.0.117-1.fc14.noarch.rpm
pulp-cds-0.0.117-1.fc14.noarch.rpm
pulp-0.0.117-1.fc14.noarch.rpm
python-webpy-0.32-6.fc14.noarch.rpm
gofer-0.10-1.fc14.noarch.rpm
python-qpid-0.7.946106-1.fc14.noarch.rpm

Errata in pulp-f14-64: 

 none

Files in pulp-f14-64: 

 none
</pre><h4 id="ListGPGKeys">List GPG Keys</h4>
<p>
The list of GPG keys associated with the repository can be obtained using the <tt>repo listkeys</tt> command.  Again, the <tt>--id</tt> flag is required to indicate the repository being queried.
</p>
<pre class="wiki">$ pulp-admin repo listkeys --id pulp-f14-64
+------------------------------------------+
   GPG keys associated with pulp-f14-64
+------------------------------------------+

RPM-GPG-KEY-fedora
</pre><hr />
<h2 id="sync">Synchronization</h2>
<p>
If a repository is configured with a feed, content can be downloaded from that feed into the Pulp server. This synchronization can occur either through a manual command in the <tt>pulp-admin</tt> script or configured to automatically run at a set time (for more information on scheduling repo synchronization, see the <a class="wiki" href="UGRepo.html#crud">repo creation</a> section of this guide). 
</p>
<p>
The simplest syntax for synchronizing a repository is as follows:
</p>
<pre class="wiki">$ pulp-admin repo sync --id pulp-f14-64
</pre><p>
By default, the sync runs asynchronously. In other words, the <tt>repo sync</tt> command will immediately return, however the actual download will proceed on the server. The status of the sync can be found with the <tt>repo status</tt> command:
</p>
<pre class="wiki">$ pulp-admin repo status --id pulp-f14-64
+------------------------------------------+
           Status for pulp-f14-64
+------------------------------------------+
Repository: pulp-f14-64
Number of Packages: 10
Last Sync: 2011-01-07 15:36:45.161000
Currently syncing: 50% done (5 of 10 packages downloaded)
</pre><p>
Alternatively, the sync can be run in the foreground by passing the <tt>-F</tt> flag to the sync call:
</p>
<pre class="wiki">$ pulp-admin repo sync --id pulp-f14-64 -F
Sync for repository pulp-f14-64 started
Step: Downloading Items or Verifying
[===                      ] 14%
Rpms: 4/15
Total: 4/15 items
</pre><p>
In addition to the <tt>-F</tt> flag, the following options are available to the <tt>repo sync</tt> call. These are only available when running a manual sync using <tt>pulp-admin repo sync</tt> and are not supported for scheduled sync jobs.
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> Limit Bandwidth Per Thread </td><td> <tt>--limit</tt> </td><td> If specified, will limit the bandwidth each thread uses when synchronizing yum content.  Value is expected to be in KB/sec. 
</td></tr><tr><td> Threads </td><td> <tt>--threads</tt> </td><td> If specified, will allow this many threads to be used for synchronization. 
</td></tr><tr><td> Timeout </td><td> <tt>--timeout</tt> </td><td> Time for the sync to run before being timed out. The format follows the <a class="wiki" href="UGGeneral.html#timeunits">Time Units</a> guidelines.
</td></tr><tr><td> Skip Packages </td><td> <tt>--no-packages</tt> </td><td> If specified, packages found in the feed that are not part of an errata will not be synchronized. If errata are still downloaded as part of the sync, their associated packages will still be downloaded. 
</td></tr><tr><td> Skip Errata </td><td> <tt>--no-errata</tt> </td><td> If specified, errata found in the feed will not be synchronized. 
</td></tr><tr><td> Skip Distributions </td><td> <tt>--no-distribution</tt> </td><td> If specified, distributions found in the feed will not be synchronized. 
</td></tr></table>
<hr />
<h2 id="packages">Packages</h2>
<h3 id="AddPackage">Add Package</h3>
<p>
Packages can be associated with a repository using the <tt>pulp-admin</tt> script. When add_package is invoked, a package is selected from a source repository and added to the destination repository. During this process, a dependency lookup happens for the requested package(s) and the call provides a suggestive option to choose to any dependencies required by this call.
</p>
<p>
The <tt>repo add_package</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Target repository Id to add the package. 
</td></tr><tr><td> Package Name </td><td> <tt>-p</tt> or <tt>--package</tt> </td><td> Package filename to add to this repository. 
</td></tr><tr><td> Source ID </td><td> <tt>--source</tt> </td><td> Source repository with specified packages to perform add. 
</td></tr><tr><td> Assume Yes </td><td> <tt>-y</tt> or <tt>--assumeyes</tt> </td><td> Assume yes; automatically process dependencies as part of add operation. 
</td></tr><tr><td> Recursive  </td><td> <tt>-r</tt> or <tt>--recursive</tt> </td><td> Recursively lookup the dependency list; defaults to one level of lookup. 
</td></tr></table>
<h4 id="Example:Addapackagefromsourcetotargetrepositorytopleveldependencyresolution">Example: Add a package from source to target repository (top level dependency resolution)</h4>
<pre class="wiki">$ pulp-admin repo add_package --id=test17 --source=f13-updates -p lxc-libs-0.7.2-1.fc13.x86_64 
</pre><h4 id="Example:Addapackagefromsourcetotargetrepositoryrecursive">Example: Add a package from source to target repository (recursive)</h4>
<pre class="wiki">$ pulp-admin repo add_package --id=test17 --source=f13-updates -p lxc-libs-0.7.2-1.fc13.x86_64 -r
</pre><h3 id="RemovePackage">Remove Package</h3>
<p>
The <tt>repo remove_package</tt> command is used to indicate a package to remove from a Pulp repository. During this process, a dependency lookup happens for the requested package and the call provides a suggestive option to choose to any dependencies required by this call.
</p>
<p>
The <tt>repo remove_package</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Target repository Id to delete the package. 
</td></tr><tr><td> Package Name </td><td> <tt>-p</tt> or <tt>--package</tt> </td><td> Package filename to delete from this repository. 
</td></tr><tr><td> Assume Yes </td><td> <tt>-y</tt> or <tt>--assumeyes</tt> </td><td> Assume yes; automatically process dependencies as part of delete operation. 
</td></tr><tr><td> Recursive  </td><td> <tt>-r</tt> or <tt>--recursive</tt> </td><td> Recursively lookup the dependency list; defaults to one level of lookup. 
</td></tr></table>
<h4 id="Example:Removeapackagefromrepositorytopleveldependencyresolution">Example: Remove a package from repository (top level dependency resolution)</h4>
<pre class="wiki"> $ pulp-admin repo remove_package --id=test17 -p lxc-libs-0.7.2-1.fc13.x86_64
</pre><h4 id="Example:Removeapackagefromrepositoryrecursive">Example: Remove a package from repository (recursive)</h4>
<pre class="wiki"> $ pulp-admin repo remove_package --id=test17 -p lxc-libs-0.7.2-1.fc13.x86_64 -r
</pre><hr />
<h2 id="files">Files</h2>
<h3 id="AddFile">Add File</h3>
<p>
Files can be associated with a repository using the <tt>pulp-admin</tt> script. When add_file is invoked, a file is selected from a source repository (if specified) or from the Pulp server in general and added to the destination repository. Files can be specified with multiple -f or via --csv. Both options cannot be used in the same command.
</p>
<p>
The <tt>repo add_file</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the target repository to add files to. 
</td></tr><tr><td> Files </td><td> <tt>-f</tt> or <tt>--filename</tt> </td><td> File to add to this repository. 
</td></tr><tr><td> Source ID </td><td> <tt>--source</tt> </td><td> Source repository with specified file to perform add (optional). 
</td></tr><tr><td> CSV File </td><td> <tt>--csv</tt> </td><td> A csv file to perform batch operations on. Format: filename,checksum 
</td></tr></table>
<h4 id="Example:Addfilefromsourcetotargetrepository">Example: Add file from source to target repository</h4>
<pre class="wiki">$ pulp-admin repo add_file --id testrepo --source myfiles -f test.iso
</pre><h4 id="Example:Addanorphanedfiletotargetrepository">Example: Add an orphaned file to target repository</h4>
<pre class="wiki">$ pulp-admin repo add_file --id testrepo -f test.iso
</pre><h4 id="Example:Addabatchoffilestotargetrepository">Example: Add a batch of files to target repository</h4>
<pre class="wiki">$ pulp-admin repo add_file --id testrepo --csv test.csv
</pre><h3 id="DeleteFile">Delete File</h3>
<p>
The <tt>repo remove_file</tt> command is used to remove files from a repository. Files can be specified with multiple -f or via --csv. Both options cannot be used in the same command. It takes the following arguments: 
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the target repository to remove files from. 
</td></tr><tr><td> Files </td><td> <tt>-f</tt> or <tt>--filename</tt> </td><td> File to remove from this repository. 
</td></tr><tr><td> CSV File </td><td> <tt>--csv</tt> </td><td> A CSV file to perform batch operations on. Format: filename,checksum 
</td></tr></table>
<h4 id="Example:removefilefromtargetrepository">Example: remove file from target repository</h4>
<pre class="wiki">$ pulp-admin repo remove_file --id testrepo -f test.iso
</pre><h4 id="Example:removeabatchoffilestotargetrepository">Example: remove a batch of files to target repository</h4>
<pre class="wiki">$ pulp-admin repo remove_file --id testrepo --csv test.csv
</pre><hr />
<h2 id="cloning">Cloning</h2>
<p>
Repository cloning is a simple way to create a new repository seeded with content from an existing Pulp repository. 
</p>
<p>
For example, given a spacewalk repository on Pulp server, a clone of this repository can be created as follows:
</p>
<pre class="wiki">$ pulp-admin repo clone --id spacewalk --clone_id spacewalk-clone
</pre><p>
In this case, the feed of the cloned repo will point to contents of parent repo on the pulp server. 
</p>
<p>
There are two more types of of repository clones: 
</p>
<h4 id="ClonewithOriginFeed">Clone with Origin Feed</h4>
<p>
In this case, the feed of the cloned repository will be the same as that of parent repository.  
</p>
<pre class="wiki"> $ pulp-admin repo clone --id spacewalk --clone_id spacewalk-clone-origin --feed origin -F
</pre><h4 id="ClonewithoutParentOriginFeed">Clone without Parent/Origin Feed</h4>
<p>
This is also known as a <i>feedless</i> clone. In this case, the feed of the the cloned repository is 'None'.
</p>
<pre class="wiki">$ pulp-admin repo clone --id spacewalk --clone_id spacewalk-clone-feedless --feed none -F
</pre><p>
Note that in all of the above cases, immediately after the cloning operation is finished, both parent and clone have same content (packages, errata, distributions). In case of the default cloning with parent feed and cloning with origin feed, a sync operation can performed at any time on cloned repo using the <tt>repo sync</tt> command. In feedless clone, a sync cannot be performed but packages can be uploaded manually (see the <a class="wiki" href="UGPackages.html#upload">Packages - Upload</a> section for more information).
</p>
<p>
Depending upon the content of the origin repository, the cloning operation can take a long time. Similar to <tt>repo sync</tt>, the clone operation runs asynchronously by default.
</p>
<pre class="wiki">$ pulp-admin repo clone --id example --clone_id clone_example
Repository [example] is being cloned as [clone_example]
Use "repo status" to check on the progress
</pre><p>
The status of the sync can be viewed with the <tt>repo status</tt> command specifying the ID of the cloned repo. Alternatively, the clone operation can be run in the foreground by passing the <tt>-F</tt> flag. 
</p>
<pre class="wiki">$ pulp-admin repo clone --id example --clone_id clone_example -F
Repository [example] is being cloned as [clone_example]
You can safely CTRL+C this current command and it will continue
[==================================================] 100% (10 of 10 pkgs)
Clone: Finished
</pre><hr />
<h2 id="filters">Filters</h2>
<p>
Repository filters are ways of filtering the available content for repositories <strong>with local feed</strong>. 
</p>
<p>
Filters are of 2 types -
</p>
<ul><li>Blacklist filters - It contains a list of packages that should be omitted when syncing associated repository.
</li><li>Whitelist filters - In this case, only the packages matching a list of packages in whitelist filter should be synced from source. 
</li></ul><p>
A filter can be associated with multiple repositories and a repository can have multiple filters. If a repository has whitelist as well as blacklist filters associated with it, all the source packages matching whitelist filters are synced except for ones matching blacklist filters. 
</p>
<h3 id="CreationandUpdate">Creation and Update</h3>
<p>
Filters can be created using <tt>filter create</tt> command in the <tt>pulp-admin</tt> script. For example, to create a filter that filter out all openoffice.org packages and broadcom-wl-5.100.82.38-1.fc13.noarch package, the following command would be used:
</p>
<pre class="wiki">$ pulp-admin filter create --id=test-filter --type=blacklist --description="Openoffice and broad-wl filter" -p "openoffice.org*" -p "broadcom-wl-5.100.82.38-1.fc13.noarch" 
Successfully created filter [ test-filter ]
</pre><p>
Id and type are the required attributes, however, you do not have to provide packages at the time of creation. You can do so later by using "filter add_packages" and "filter remove_packages" commands. You can provide multiple packages as shown using multiple -p options. You can provide a package name, full NVRA or a regex as an argument to -p option. 
</p>
<pre class="wiki">$ pulp-admin filter create --id=pulp-whitelist-filter --type=whitelist
Successfully created filter [ pulp-whitelist-filter ]

$ pulp-admin filter add_packages --id=pulp-whitelist-filter -p "pulp*" -p "grinder"
Successfully added packages to filter [ pulp-whitelist-filter ]

$ pulp-admin filter remove_packages --id=pulp-whitelist-filter -p "grinder"
Successfully removed packages to filter [ pulp-whitelist-filter ]
</pre><h3 id="ListandInfo">List and Info</h3>
<p>
All repo filters can be listed using "filter list" and individual filter information is available through "filter info".
</p>
<pre class="wiki">$ sudo pulp-admin filter list
+------------------------------------------+
              Available Filters
+------------------------------------------+

Id           :               	test-filter              
Description  :               	Openoffice and broad-wl filter
Type         :               	blacklist                
Package List :               	[u'openoffice.org*', u'broadcom-wl-5.100.82.38-1.fc13.noarch']


Id           :               	pulp-whitelist-filter    
Description  :               	pulp-whitelist-filter    
Type         :               	whitelist                
Package List :               	[u'pulp*']               
</pre><pre class="wiki">$ sudo pulp-admin filter info --id=test-filter

Id           :               	test-filter              
Description  :               	Openoffice and broad-wl filter
Type         :               	blacklist                
Package List :               	[u'openoffice.org*', u'broadcom-wl-5.100.82.38-1.fc13.noarch']
</pre><h3 id="Delete">Delete</h3>
<p>
A filter can be deleted using "filter delete". If a filter is associated with any repositories, "filter delete" will not delete the filter unless you provide --force option. If --force is provided, all associations of this filter are deleted along with filter.
</p>
<pre class="wiki">$ pulp-admin filter delete --id=test-filter --force
Successfully deleted Filter [ test-filter ]
</pre><h3 id="AssociationwithRepositories">Association with Repositories</h3>
<p>
There are two ways in which you can associate filters with repositories:
</p>
<ul><li>Filters applied during cloning a repository: You can specify one or more filters while cloning a repo. As a result of this, cloned respository is associated with these filters and they are applied during cloning operation. 
</li></ul><pre class="wiki">$ pulp-admin repo clone --id=test-repo --clone_id=clone-test-repo -f filter1 -f filter2
</pre><p>
Multiple filters can be specified using multiple -f options. You can verify packages synced using "repo content" to make sure filters were applied successfully. Note that this will not work with repo clone with "origin" feed as filters work only with repositories with "local" feed. 
</p>
<p>
Successive syncs with continue to apply filters associated with repository unless you remove them using "repo remove_filters" command as shown- 
</p>
<pre class="wiki">$ pulp-admin repo remove_filters --id=clone-test-repo -f filter1
Successfully removed filters ['filter1'] from repository [clone-test-repo]
</pre><ul><li>Filters added manually to a repository using "repo add_filters" command. 
</li></ul><pre class="wiki">$ pulp-admin repo add_filters --id=clone-test-repo -f filter1 -f filter2
Successfully added filters ['filter1','filter2'] to repository [clone-test-repo]
</pre><hr />
<h2 id="publish">Publish</h2>
<p>
The ability to control if a repository is accessible from HTTPS requests may be set through the <tt>repo publish</tt> command.
</p>
<ul><li>Pulp's default behavior for repository publishing is set in <tt>pulp.conf</tt>
<pre class="wiki">[repos]
default_to_published: true
</pre><ul><li>If <tt>default_to_published</tt> is true, all repositories will be published and accessible through HTTPS.  It is still possible to restrict a specific repository, through use of the 'repo publish --disable' command.
</li><li>If <tt>default_to_published</tt> is false, all repositories will be hidden from HTTPS and not published.  A user would need to run 'repo publish --enable' to allow HTTPS access for a specific repository.
</li></ul></li></ul><ul><li>Example to publish the repository, making it accessible from the Pulp server and CDS instances
<pre class="wiki">$ pulp-admin repo publish --id test-repo --enable
</pre></li></ul><ul><li>Example to disable publishing a repository
<pre class="wiki">$ pulp-admin repo publish --id test-repo --disable
</pre></li></ul><h3 id="Metadata">Metadata</h3>
<p>
Schedules metadata generation for a specific repository. This creates an async task and queues it. The status for this task can be checked with a status flag.
</p>
<p>
The <tt>repo metadata</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> ID </td><td> <tt>--id</tt> </td><td> Identifies the repository to generate metadata. 
</td></tr><tr><td> Status </td><td> <tt>--status</tt> </td><td> Metadata generation status for this repository. </td><td>|
</td></tr></table>
<h4 id="Example:scheduleametadatagenerationforarepository">Example: schedule a metadata generation for a repository</h4>
<pre class="wiki">$ pulp-admin repo metadata --id testrepo
</pre><h4 id="Example:checkthemetadataschedulestatusforarepository">Example: check the metadata schedule status for a repository</h4>
<pre class="wiki">$ pulp-admin repo metadata --id testrepo --status
</pre><h3 id="Discovery">Discovery</h3>
<p>
Perform repo discovery for a specified url and type. This creates an async task and waits for the discovery to complete. Then prompts the user for url selection.
</p>
<p>
The <tt>repo discovery</tt> command takes following arguments:
</p>
<table class="wiki">
<tr><td> <strong>Name</strong> </td><td> <strong>Flag</strong> </td><td> <strong>Description</strong> 
</td></tr><tr><td> URL </td><td> <tt>-u</tt> or <tt>--url</tt> </td><td> root url to perform discovery (required). 
</td></tr><tr><td> TYPE </td><td> <tt>-t</tt> or <tt>--type</tt> </td><td>  content type to look for during discovery(required); supported types: ['yum',] 
</td></tr><tr><td> ASSUMEYES </td><td> <tt>-y</tt> or <tt>--assumeyes</tt> </td><td> Assume yes; automatically create candidate repos for discovered urls.(optional). 
</td></tr><tr><td> GROUPID   </td><td> <tt>-g</tt> or <tt>--groupid</tt>   </td><td> groupids to associate the discovered repos (optional). 
</td></tr></table>
<h4 id="Example:performarepodiscoveryinteractively">Example: perform a repo discovery interactively</h4>
<pre class="wiki">$ sudo pulp-admin repo discovery -u http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/ -t yum
Discovering urls with yum metadata, This could take sometime..
Waiting -
+------------------------------------------+
 Repository Urls discovered @ [http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/]
+------------------------------------------+
(-)  [1] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo_smaller/
(-)  [2] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo/

Select urls for which candidate repos should be created (h for help):h
  'a'   	 : select all
  'x:y' 	 : select a range eg:1:3
  &lt;sel&gt; 	 : select value between 1 and 2
  'y'   	 : confirm selection
  'c'   	 : clear selections
  'q'   	 : abort the repo creation
Select urls for which candidate repos should be created (h for help):1:2
(+)  [1] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo_smaller/
(+)  [2] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo/

Select urls for which candidate repos should be created (h for help):y

Creating candidate repos for selected urls..
Successfully created repo [repos-pulp-pulp-demo_repos-test_bandwidth_repo_smaller]
Successfully created repo [repos-pulp-pulp-demo_repos-test_bandwidth_repo]
</pre><h4 id="Example:performrepodiscoverynon-interactively">Example: perform repo discovery non-interactively</h4>
<pre class="wiki">$ sudo pulp-admin repo discovery -u http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/ -t yum -y
Discovering urls with yum metadata, This could take sometime..
Waiting \
+------------------------------------------+
 Repository Urls discovered @ [http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/]
+------------------------------------------+
(+)  [1] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo_smaller/
(+)  [2] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos//test_bandwidth_repo/

Creating candidate repos for selected urls..
Successfully created repo [repos-pulp-pulp-demo_repos-test_bandwidth_repo_smaller]
Successfully created repo [repos-pulp-pulp-demo_repos-test_bandwidth_repo]

</pre></div>
   </div>
   
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"), "Link to this section");
  </script>
 
 
</div>


<!-- BEGIN FOOTER -->
</body>
</html>

